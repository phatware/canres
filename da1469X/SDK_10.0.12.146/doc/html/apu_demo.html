<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SmartSnippets DA1469x SDK: APU(Audio Processing Unit) demo application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SmartSnippets DA1469x SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Board&#160;and&#160;Applications&#160;General&#160;Info</span></a></li>
      <li><a href="modules.html"><span>SDK&#160;Architecture</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">APU(Audio Processing Unit) demo application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Overview</h2>
<p>The application demonstrates how various APU data paths can be used.</p>
<p>Features:</p>
<ul>
<li>The application prints the path configuration of each demo used via UART2,</li>
<li>The application checks the usage of PDM input to I2S output and I2S input to I2S output paths.</li>
</ul>
<p>There are four demos supplied as examples:</p>
<ol type="1">
<li>PDM-SRC-PCM configuration for voice/audio streaming.</li>
<li>PDM-SRC-MEMORY-&gt; MEMORY-SRC-PCM configuration for voice recording for ~12 seconds and audio playback.</li>
<li>PCM-SRC-PCM configuration for voice/audio streaming.</li>
<li>PCM-SRC-MEMORY-&gt; MEMORY-SRC-PCM configuration for voice recording for ~12 seconds and audio playback.</li>
<li><p class="startli">MEMORY-SRC1-MEMORY configuration that changes the sample rate of a tone in the memory.</p>
<p class="startli"><b>Note</b>:</p><ul>
<li>Demos are implemented with the specific configuration (sample rate, bit depth etc.). Further configurability is not supported.</li>
<li>Demos that include PCM interface can be ran using either DIVN or DIV1(all supported clocks) system clock by setting:</li>
</ul>
</li>
</ol>
<div class="fragment"><div class="line"><span class="preprocessor">#define SYS_CLK_DIV1                             (1)</span></div>
</div><!-- fragment --><ul>
<li>Demos that include PCM or MEMORY can have sample rate conversion between two pairs of sample rates: <pre class="fragment">1. 16KHz to/from 8KHz by setting:
</pre></li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#define SR1_16_SR2_8                             (1)</span></div>
<div class="line"><span class="preprocessor">#define SR1_48_SR2_32                            (0)</span></div>
</div><!-- fragment --> <pre class="fragment">     2. 48KHz to/from 32KHz by setting:
</pre><div class="fragment"><div class="line"><span class="preprocessor">#define SR1_16_SR2_8                            (0)</span></div>
<div class="line"><span class="preprocessor">#define SR1_48_SR2_32                           (1)</span></div>
</div><!-- fragment --><p> when PCM is used as output the sample rate is 16/48KHz respectively.</p>
<h3>Folder structure</h3>
<table class="doxtable">
<tr>
<th>Top level folders </th><th>Description  </th></tr>
<tr>
<td>config/ </td><td>Configuration of demo applications </td></tr>
<tr>
<td>sdk/ </td><td>SDK layer </td></tr>
<tr>
<td>startup/ </td><td>Startup files </td></tr>
</table>
<table class="doxtable">
<tr>
<th>Includes folder contents </th><th>Description  </th></tr>
<tr>
<td>includes/DA7218_driver.h </td><td>Driver for DA7218 </td></tr>
<tr>
<td>includes/audio_task.h </td><td>Default application configuration (see Suggested configurable parameters) </td></tr>
<tr>
<td>includes/periph_setup.h </td><td>Default GPIO pin assignment (see GPIO assignments) </td></tr>
<tr>
<td>includes/DA7218_regs.h </td><td>Registers file of Codec DA7218 (should not be modified directly, modify audio_codec_driver.h above instead) </td></tr>
<tr>
<td>includes/demo_helpers.h </td><td>Construction of sin and cos tones </td></tr>
</table>
<h3>Demos</h3>
<p>Using the apu_demo it is possible to check how APU framework works. The features depend on the selected demos which are described below.</p>
<p>All demos use:</p><ul>
<li>DA7218_driver.c: functions for Codec DA7218</li>
<li>audio_task.c : Demos implementation</li>
<li>demo_helpers.c: functions for construction of tones</li>
</ul>
<h4>PDM-SRC-PCM configuration</h4>
<ul>
<li><b>Demonstrated path</b>: PDM-SRC-PCM</li>
<li><b>Source file</b>: audio_task.c</li>
<li><b>Description</b>:<br />
</li>
</ul>
<p>The demo allows the user to listen from PDM Mic input (SPK0838HT4H-B digital microphone), using a headset, hooked in a DA7218 module jack.</p>
<p><b>Hardware Setup</b>:</p>
<ul>
<li>Dialog DA7218 mikrobus module</li>
<li>SPK0838HT4H-B digital microphone</li>
</ul>
<p><b>Run steps</b>:<br />
 To enable the demo go to the <code>includes/audio_task.h</code> file. The respective macro must be set to (1).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define DEMO_PDM_MIC               (1)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PDM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_MEM_TO_MEM            (0)</span></div>
</div><!-- fragment --><h4>PDM-SRC-MEMORY-&gt; MEMORY-SRC-PCM configuration</h4>
<ul>
<li><b>Demonstrated path</b>: PDM-SRC-MEMORY-&gt; MEMORY-SRC-PCM</li>
<li><b>Source file</b>: audio_task.c</li>
<li><b>Description</b>:<br />
 The demo allows the user to listen from PDM Mic input (SPK0838HT4H-B digital microphone), using a headset hooked in a DA7218 module jack. More specifically:<ul>
<li>The PDM-SRC-Memory configuration allows the user to record PDM input to QSPI (Log partition) by pressing K1 button. The recording duration is ~12 seconds with the default sample rate and bit depth.</li>
<li>The Memory-SRC-PCM configuration allows the user to listen to recorded audio, using a headset hooked in a DA7218 module jack.</li>
</ul>
</li>
</ul>
<p><b>Hardware Setup</b>:</p>
<ul>
<li>Dialog DA7218 mikrobus module</li>
<li>SPK0838HT4H-B digital microphone</li>
</ul>
<p><b>Run steps</b>:<br />
 To enable the demo go to the <code>includes/audio_task.h</code> file. The respective macro must be set to (1).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define DEMO_PDM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PDM_RECORD_PLAYBACK   (1)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_MEM_TO_MEM            (0)</span></div>
</div><!-- fragment --><h4>PCM-SRC-PCM configuration</h4>
<ul>
<li><b>Demonstrated path</b>: PCM-SRC-PCM</li>
<li><b>Source file</b>: audio_task.c</li>
<li><b>Description</b>:<br />
 The demo allows the user to listen from a PCM Mic input, using a headset hooked in a DA7218 module jack.</li>
</ul>
<p><b>Hardware Setup</b>:</p>
<ul>
<li>Dialog DA7218 mikrobus module</li>
</ul>
<p><b>Run steps</b>:<br />
 To enable the demo go to the <code>includes/audio_task.h</code> file. The respective macro must be set to (1).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define DEMO_PDM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PDM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_MIC               (1)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_MEM_TO_MEM            (0)</span></div>
</div><!-- fragment --><h4>PCM-SRC-MEMORY-&gt; MEMORY-SRC-PCM configuration</h4>
<ul>
<li><b>Demonstrated path</b>: PCM-SRC-MEMORY-&gt; MEMORY-SRC-PCM</li>
<li><b>Source file</b>: audio_task.c</li>
<li><b>Description</b>:<br />
 The demo allows the user to listen from a PCM Mic input, using a headset hooked in a DA7218 module jack. More specifically:<ul>
<li>The PCM-SRC-Memory configuration allows the user to record PCM input to QSPI (Log partition) by pressing K1 button. The recording duration is ~12 seconds with the default sample rate and bit depth.</li>
<li>The Memory-SRC-PCM configuration allows the user to listen to recorded audio, using a headset hooked in a DA7218 module jack.</li>
</ul>
</li>
</ul>
<p><b>Hardware Setup</b>:</p>
<ul>
<li>Dialog DA7218 mikrobus module</li>
</ul>
<p><b>Run steps</b>:<br />
 To enable the demo go to the <code>includes/audio_task.h</code> file. The respective macro must be set to (1).</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define DEMO_PDM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PDM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_RECORD_PLAYBACK   (1)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_MEM_TO_MEM            (0)</span></div>
</div><!-- fragment --><h4>MEMORY-SRC1-MEMORY configuration</h4>
<ul>
<li><b>Demonstrated path</b>: MEMORY-SRC1-MEMORY</li>
<li><b>Source file</b>: audio_task.c</li>
<li><b>Description</b>:<br />
</li>
<li>The demo converts the sample rate of 16/48 KHz of a tone of 1 KHz in memory to 8/32 KHz sample rate, respectively. Using memory browser, the tone in the input memory buffer must be the same with the one in the output memory buffer when it is depicted in an audio analyzer such as audacity.</li>
<li><b>Run steps</b>:<br />
 To enable the demo go to the <code>includes/audio_task.h</code> file. The respective macro must be set to (1).</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#define DEMO_PDM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PDM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_MIC               (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_PCM_RECORD_PLAYBACK   (0)</span></div>
<div class="line"><span class="preprocessor">#define DEMO_MEM_TO_MEM            (1)</span></div>
</div><!-- fragment --><h2>Installation procedure</h2>
<p>The project is located in the <code>projects/dk_apps/demos/apu_demo</code> folder.</p>
<p>To install the project follow the <a class="el" href="install_and_debug_procedure.html">General Installation and Debugging Procedure</a>.</p>
<h2>File structure</h2>
<p>The following file structure will be created:</p>
<ul>
<li>projects/dk_apps/demos/apu_demo/<ul>
<li>config<ul>
<li>custom_config_qspi.h</li>
<li>custom_config_ram.h</li>
</ul>
</li>
<li>includes<ul>
<li>audio_task.h</li>
<li>DA7218_driver.h</li>
<li>DA7218_regs.h</li>
<li>demo_helpers.h</li>
<li>periph_setup.h</li>
</ul>
</li>
<li>sdk</li>
<li>startup</li>
<li>audio_task.c</li>
<li>config_audio_demo.c</li>
<li>DA7218_driver.c</li>
<li>demo_helpers.c</li>
<li>main.c</li>
</ul>
</li>
</ul>
<h2>Existing build configurations</h2>
<p>The template contains build configurations for executing it from RAM or QSPI.</p>
<ul>
<li><code>DA1469X-00-Debug_RAM</code>. The project is built to be run from RAM. The executable is built with debug (-Og) information.</li>
<li><code>DA1469X-00-Debug_QSPI</code>. The project is built to be run from QSPI. The executable is built with debug (-Og) information.</li>
<li><code>DA1469X-00-Release_RAM</code>. The project is built to be run from RAM. The executable is built with no debug information and size optimization (-Os).</li>
<li><code>DA1469X-00-Release_QSPI</code>. The project is built to be run from QSPI. The executable is built with no debug information and size optimization (-Os). </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Jul 15 2022 14:13:47 for SmartSnippets DA1469x SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
